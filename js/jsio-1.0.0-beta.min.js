/**
 * JSIO v1.0.0 Beta
 * 
 * Copyright 2011 Alan Shaw
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and limitations
 * under the License.
 */
(function(k,i){if(!k.jsio){k.jsio={}}var f=i.getElementsByTagName("script"),h=f[f.length-1],j="?"+h.src.replace(/^[^\?]+\??/,""),a=(function(){var m,d=3,n=i.createElement("div");while(n.innerHTML="<!--[if gt IE "+(++d)+"]><i></i><![endif]-->",n.getElementsByTagName("i")[0]){}return d>4?d:m}());function e(m,o){if(!o){o=""}var n=new RegExp("[\\?&]"+m+"=([^&#]*)"),d=n.exec(j);return d?d[1]:o}function c(){for(var o=0,m=i.styleSheets.length;o<m;++o){var u=i.styleSheets[o],r=a<9?"rules":"cssRules";for(var n=0,v=u[r].length;n<v;++n){var s=u[r][n],d=s.style.backgroundImage;if(d){var t=/url\(['"]?(.*?)jsio\.gif#(.*?)['"]?\)/gmi,q,p=d;while(q=t.exec(d)){if(jsio.resources[q[2]]){if(a<8||(a==8&&jsio.resources[q[2]].length*2>32000)){p=p.replace(q[0],"url("+q[1]+q[2]+")")}else{p=p.replace(q[0],"url("+jsio.resources[q[2]]+")")}}else{p=p.replace(q[0],"url("+q[1]+q[2]+")")}}if(p!=d){s.style.backgroundImage=p}}}if(a){u.addRule("jsio","jsio")}}}function l(){var d=i.getElementsByTagName("img");for(var o=0,n=d.length;o<n;++o){var p=/(.*?)jsio\.gif#(.*)/gmi,m;if(m=p.exec(d[o].src)){if(jsio.resources[m[2]]){if(a<8||(a==8&&jsio.resources[m[2]].length*2>32000)){d[o].src=m[1]+m[2]}else{d[o].src=jsio.resources[m[2]]}}else{d[o].src=m[2]}}}}function b(){if(!jsio.resources){return}c();l()}var g=i.createElement("script");if(a<9){g.onreadystatechange=function(){if(this.readyState=="loaded"||this.readyState=="complete"){b()}}}else{g.onload=b}h.parentNode.appendChild(g,h);g.src=e("resUrl","/js/jsio-resources.js")})(window,document);